{"version":3,"sources":["utils/actions.js","utils/constants.js","utils/socket.js","utils/request.js","actions/auth.js","components/common/body/index.js","utils/store.js","components/login/login-form.js","components/login/index.js","components/home/user.js","components/home/active-users.js","components/home/index.js","components/registration/registration-form.js","components/registration/index.js","components/error/index.js","hocs/with-auth.js","hocs/with-store.js","containers/Login.js","containers/Home.js","actions/home.js","containers/Registration.js","containers/Error.js","store/auth.js","store/users.js","App.js","store/index.js","index.js"],"names":["LOGIN_PENDING","SIGN_UP_PENDING","SIGN_UP_SUCCESS","SIGN_UP_FAILURE","env","process","console","log","REGISTRATION_ERROR","Socket","socket","getSocket","create","openSocket","disconnect","defaultHeaders","iAxios","axios","baseURL","headers","interceptors","request","use","config","error","info","Date","Promise","reject","response","myFetch","url","options","withCredentials","login","username","password","a","store","dispatch","type","ACTIONS","method","data","status","payload","signUp","isAdmin","get","logout","useStyles","makeStyles","theme","container","height","margin","textAlign","title","flexGrow","Body","props","classes","history","useHistory","useState","anchorEl","setAnchorEl","open","Boolean","AppBar","position","Toolbar","Typography","variant","className","isLoggedIn","IconButton","aria-label","aria-controls","aria-haspopup","onClick","event","currentTarget","color","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","push","children","defaultProps","reducerMap","loginForm","display","flexDirection","alignItems","justifyContent","field","width","LoginForm","isSubmitting","onSubmit","setUsername","setPassword","e","preventDefault","target","elements","TextField","label","required","value","onChange","CircularProgress","Button","disabled","to","loginCtr","maxWidth","Login","loggingIn","loginFailure","signingUp","signUpSuccess","loggingOut","logoutSuccess","showError","registerSuccess","logoutSuccessAlert","Alert","severity","Paper","elevation","user","marginRight","UserAvatar","Avatar","alt","toUpper","ActiveUsers","list","AvatarGroup","max","map","key","Home","activeUsers","registerForm","RegistrationForm","Username","setAdmin","FormControlLabel","control","Switch","size","checked","signUpCtr","Registration","signUpFailure","admin","Error","message","href","withAuth","SecureComponent","isLoading","setLoading","redirect","setRedirect","useEffect","res","checkAuth","withStore","stateMapper","ContainerComponent","state","useContext","StoreContext","pageState","loading","loginSuccess","HomeWithAuth","on","getActiveUsers","loggedInUser","setTimeout","ErrorContainer","initalState","reducer","listeners","action","forEach","listener","getState","subscribe","filter","l","createStore","userHistory","Object","keys","reduce","nextState","React","createContext","App","Provider","path","exact","render","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e3517bc9.chunk.js","sourcesContent":["export const LOGIN_PENDING = \"app/auth/LOGIN_STARTED\";\r\nexport const LOGIN_SUCCESS = \"app/auth/LOGIN_SUCCESS\";\r\nexport const LOGIN_FAILURE = \"app/auth/LOGIN_FAILURE\";\r\nexport const LOGIN_RESET = \"app/auth/LOGIN_RESET\";\r\n\r\nexport const LOGOUT_PENDING = \"app/auth/LOGOUT_PENDING\";\r\nexport const LOGOUT_SUCCESS = \"app/auth/LOGOUT_SUCCESS\";\r\nexport const LOGOUT_FAILURE = \"app/auth/LOGOUT_FAILURE\";\r\n\r\nexport const SIGN_UP_PENDING = \"app/auth/SIGN_UP_PENDING\";\r\nexport const SIGN_UP_SUCCESS = \"app/auth/SIGN_UP_SUCCESS\";\r\nexport const SIGN_UP_FAILURE = \"app/auth/SIGN_UP_FAILURE\";\r\nexport const SIGN_UP_RESET = \"app/auth/SIGN_UP_RESET\";\r\n\r\nexport const FETCH_ACTIVE_USERS_PENDING = \"app/auth/FETCH_ACTIVE_USERS_PENDING\";\r\nexport const FETCH_ACTIVE_USERS_SUCCESS = \"app/auth/FETCH_ACTIVE_USERS_SUCCESS\";\r\nexport const FETCH_ACTIVE_USERS_FAILURE = \"app/auth/FETCH_ACTIVE_USERS_FAILURE\";\r\n\r\nexport const FETCH_USER_HISTORY_PENDING = \"app/auth/FETCH_USER_HISTORY_PENDING\";\r\nexport const FETCH_USER_HISTORY_SUCCESS = \"app/auth/FETCH_USER_HISTORY_SUCCESS\";\r\nexport const FETCH_USER_HISTORY_FAILURE = \"app/auth/FETCH_USER_HISTORY_FAILURE\";\r\n","const env = process.env.NODE_ENV;\r\nconsole.log(\"ENV: \", env);\r\n\r\nexport const BASE_URL = env === \"production\" ? \"\" : \"http://localhost:8989\";\r\nexport const SOCKET_URL = \"http://localhost:8000\";\r\n\r\nexport const REGISTRATION_ERROR = \"Unable to register :( Please contact system admin if issue persists.\";\r\n","import openSocket from 'socket.io-client';\r\nimport { SOCKET_URL } from \"./constants\";\r\n\r\nconst Socket = (() => {\r\n  let socket;\r\n\r\n  const getSocket = () => socket;\r\n\r\n  const create = () => {\r\n    socket = openSocket(SOCKET_URL);\r\n    return socket;\r\n  };\r\n\r\n  const disconnect = () => {\r\n    return socket.disconnect();\r\n  };\r\n\r\n  return { getSocket, create, disconnect };\r\n})();\r\n\r\nexport default Socket;\r\n\r\n","import axios from \"axios\";\r\nimport { BASE_URL } from \"./constants\";\r\n\r\nconst defaultHeaders = {\r\n  \"Accept\": \"application/json\",\r\n  \"Content-Type\": \"application/json\"\r\n};\r\nconst iAxios = axios.create({\r\n  baseURL: BASE_URL,\r\n  headers: defaultHeaders\r\n});\r\n\r\niAxios.interceptors.request.use((config) => {\r\n  // console.info(`Request::\\n${new Date()} :: `, config);\r\n  return config;\r\n}, function (error) {\r\n  console.info(`Request ERROR::\\n${new Date()} :: `, error);\r\n  return Promise.reject(error);\r\n});\r\n\r\niAxios.interceptors.response.use(function (response) {\r\n  // console.info(`Response::\\n${new Date()} :: `, response);\r\n  return response;\r\n}, function (error) {\r\n  console.info(`Response ERROR::\\n${new Date()} :: `, error);\r\n  return Promise.reject(error);\r\n});\r\n\r\nconst myFetch = (url, options) => {\r\n  return iAxios({\r\n    url,\r\n    ...options,\r\n    withCredentials: true,\r\n    headers: { ...defaultHeaders }\r\n  });\r\n};\r\n\r\nexport default myFetch;\r\n","import get from \"lodash/get\";\r\nimport * as ACTIONS from \"../utils/actions\";\r\nimport { store } from \"../App\";\r\nimport { REGISTRATION_ERROR } from \"../utils/constants\"\r\nimport Socket from \"../utils/socket\";\r\nimport myFetch from \"../utils/request\";\r\n\r\nexport const login = async (username, password) => {\r\n  try {\r\n    store.dispatch({ type: ACTIONS.LOGIN_PENDING });\r\n    const { data } = await myFetch(\"/session/login\", {\r\n      method: \"POST\",\r\n      data: { username, password }\r\n    });\r\n    if (data.status === \"OK\") {\r\n      Socket.create();\r\n      store.dispatch({ type: ACTIONS.LOGIN_SUCCESS, payload: data.data });\r\n    } else {\r\n      throw data;\r\n    }\r\n  } catch (err) {\r\n    store.dispatch({ type: ACTIONS.LOGIN_FAILURE, payload: err });\r\n  }\r\n};\r\n\r\nexport const signUp = async (username, password, isAdmin = false) => {\r\n  try {\r\n    store.dispatch({ type: ACTIONS.SIGN_UP_PENDING });\r\n    const { data } = await myFetch(\"/users/register-user\", {\r\n      method: \"PUT\",\r\n      data: { username, password, isAdmin }\r\n    });\r\n    if (data.status === \"OK\") {\r\n      store.dispatch({ type: ACTIONS.SIGN_UP_SUCCESS, payload: true });\r\n    } else {\r\n      throw data;\r\n    }\r\n  } catch (err) {\r\n    store.dispatch({\r\n      type: ACTIONS.SIGN_UP_FAILURE,\r\n      payload: get(err, \"response.data.message\", REGISTRATION_ERROR)\r\n    });\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    store.dispatch({ type: ACTIONS.LOGIN_RESET });\r\n    store.dispatch({ type: ACTIONS.LOGOUT_PENDING });\r\n    const { data } = await myFetch(\"/session/logout\", { method: \"GET\" });\r\n    if (data.status === \"OK\") {\r\n      Socket.disconnect();\r\n      store.dispatch({ type: ACTIONS.LOGOUT_SUCCESS, payload: true });\r\n    } else {\r\n      throw data;\r\n    }\r\n  } catch (err) {\r\n    store.dispatch({ type: ACTIONS.LOGOUT_FAILURE });\r\n  }\r\n};\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { logout } from '../../../actions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"100vh\",\r\n    margin: \"auto 1em\",\r\n    textAlign: \"center\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nconst Body = (props) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleMenu = (event) => setAnchorEl(event.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n  const handleLogout = () => {\r\n    history.push(\"/app\");\r\n    logout();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            User Presence\r\n          </Typography>\r\n          {props.isLoggedIn && (\r\n            <div>\r\n              <IconButton\r\n                aria-label=\"account of current user\"\r\n                aria-controls=\"menu-appbar\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleMenu}\r\n                color=\"inherit\"\r\n              >\r\n                <AccountCircle />\r\n              </IconButton>\r\n              <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                keepMounted\r\n                transformOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                open={open}\r\n                onClose={handleClose}\r\n              >\r\n                <MenuItem onClick={handleLogout}>Logout</MenuItem>\r\n              </Menu>\r\n            </div>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.container}>\r\n        {props.children}\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nBody.defaultProps = {\r\n  isLoggedIn: false\r\n};\r\n\r\nBody.propTypes = {\r\n  isLoggedIn: PropTypes.bool,\r\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.string]).isRequired\r\n};\r\n\r\nexport default Body;","const createStore = (reducer) => {\r\n  let state;\r\n  const listeners = [];\r\n\r\n  const getState = () => {\r\n    return state;\r\n  }\r\n\r\n  const subscribe = (listener) => {\r\n    listeners.push(listener);\r\n    return listeners.filter(l => listener !== l);\r\n  }\r\n\r\n  const dispatch = (action) => {\r\n    state = reducer(state, action);\r\n    console.info(\"My Store updated: \", state);\r\n    listeners.forEach(listener => listener())\r\n  }\r\n\r\n  dispatch({});\r\n\r\n  return { getState, subscribe, dispatch };\r\n};\r\n\r\nconst combineReducers = (reducerMap) => (state = {}, action) => {\r\n  return Object.keys(reducerMap)\r\n    .reduce((nextState, key) => {\r\n      nextState[key] = reducerMap[key](\r\n        state[key],\r\n        action\r\n      );\r\n      return nextState;\r\n    }, {});\r\n};\r\n\r\nexport { createStore, combineReducers };","import React, { useState } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { makeStyles, TextField, Typography, Button, CircularProgress } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  loginForm: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: 'center',\r\n    justifyContent: \"space-around\",\r\n    height: \"26em\"\r\n  },\r\n  field: {\r\n    width: \"75%\"\r\n  }\r\n}));\r\n\r\nconst LoginForm = ({ isSubmitting, onSubmit }) => {\r\n  const classes = useStyles();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(e.target.elements);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={classes.loginForm}>\r\n      <header>\r\n        <Typography variant=\"h5\">\r\n          Welcome!\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\">\r\n          Please login to see more\r\n        </Typography>\r\n      </header>\r\n      <TextField\r\n        id=\"username\"\r\n        label=\"Username\"\r\n        variant=\"outlined\"\r\n        className={classes.field}\r\n        required\r\n        value={username}\r\n        onChange={({ target }) => setUsername(target.value)} />\r\n      <TextField\r\n        id=\"password\"\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        variant=\"outlined\"\r\n        className={classes.field}\r\n        required\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)} />\r\n      {isSubmitting ? <CircularProgress /> : <Button\r\n        variant=\"contained\"\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        color=\"primary\">\r\n        Login\r\n      </Button>}\r\n      <footer>\r\n        <Typography variant=\"subtitle2\">\r\n          Not registered yet? <Link to=\"/app/register\">Sign up</Link>\r\n        </Typography>\r\n      </footer>\r\n    </form>\r\n  );\r\n};\r\n\r\nLoginForm.propTypes = {\r\n  isSubmitting: PropTypes.bool,\r\n  onSubmit: PropTypes.func.isRequired\r\n};\r\n\r\nexport default LoginForm;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Paper, makeStyles } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport { Body } from \"../common\";\r\nimport LoginForm from './login-form';\r\nimport { login } from '../../actions';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  loginCtr: {\r\n    margin: \"8em auto\",\r\n    maxWidth: \"32em\"\r\n  }\r\n}));\r\n\r\nconst Login = ({\r\n  loggingIn,\r\n  loginFailure,\r\n  signingUp,\r\n  signUpSuccess,\r\n  loggingOut,\r\n  logoutSuccess\r\n}) => {\r\n  const classes = useStyles();\r\n  const showError = !loggingIn && loginFailure;\r\n  const registerSuccess = !signingUp && signUpSuccess;\r\n  const logoutSuccessAlert = !loggingOut && logoutSuccess;\r\n  const handleLogin = ({ username, password }) => {\r\n    login(username.value, password.value);\r\n  };\r\n\r\n  return (\r\n    <Body>\r\n      <section className={classes.loginCtr}>\r\n        {registerSuccess && <Alert severity=\"success\">Registration successfull! Please login below</Alert>}\r\n        {logoutSuccessAlert && <Alert severity=\"success\">Logout successful! Visit again!</Alert>}\r\n        {showError && <Alert severity=\"error\">Invalid credientials. Please try again!</Alert>}\r\n        <br />\r\n        <Paper elevation={2}>\r\n          <LoginForm\r\n            onSubmit={handleLogin}\r\n            isSubmitting={loggingIn} />\r\n        </Paper>\r\n      </section>\r\n    </Body>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  loggingIn: PropTypes.bool,\r\n  loginFailure: PropTypes.bool,\r\n  signingUp: PropTypes.bool,\r\n  signUpSuccess: PropTypes.bool,\r\n  loggingOut: PropTypes.bool,\r\n  logoutSuccess: PropTypes.bool\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport toUpper from \"lodash/toUpper\";\r\nimport { makeStyles, Avatar } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  user: {\r\n    position: \"relative\",\r\n    marginRight: \"-1em\"\r\n  }\r\n}));\r\n\r\nconst UserAvatar = ({ user }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Avatar alt=\"\">{toUpper(user.username[0])}</Avatar>\r\n  );\r\n};\r\n\r\nUserAvatar.propTypes = {\r\n  user: PropTypes.object\r\n};\r\n\r\nexport default UserAvatar;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport map from \"lodash/map\";\r\nimport { makeStyles } from '@material-ui/core';\r\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\r\n\r\nimport UserAvatar from './user';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n}));\r\n\r\nconst ActiveUsers = ({ list }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <AvatarGroup max={5}>\r\n      {map(list, (user) => <UserAvatar key={user.username} user={user} />)}\r\n    </AvatarGroup>\r\n  );\r\n};\r\n\r\nActiveUsers.propTypes = {\r\n  list: PropTypes.object\r\n};\r\n\r\nexport default ActiveUsers;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ActiveUsers from \"./active-users\";\r\nimport { Body } from \"../common\";\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    margin: \"10em auto\",\r\n    maxWidth: \"32em\"\r\n  }\r\n}));\r\n\r\nconst Home = ({ activeUsers }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Body isLoggedIn={true}>\r\n      <section className={classes.container}>\r\n        <ActiveUsers list={activeUsers} />\r\n      </section>\r\n    </Body>\r\n  );\r\n};\r\n\r\nHome.propTypes = {\r\n  activeUsers: PropTypes.object\r\n};\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles, Typography, Button, Switch, FormControlLabel, CircularProgress } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  registerForm: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: 'center',\r\n    justifyContent: \"space-around\",\r\n    height: \"26em\"\r\n  },\r\n  field: {\r\n    width: \"75%\"\r\n  }\r\n}));\r\n\r\nconst RegistrationForm = ({ isSubmitting, onSubmit }) => {\r\n  const classes = useStyles();\r\n  const [Username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isAdmin, setAdmin] = useState(false);\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(e.target.elements);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={classes.registerForm}>\r\n      <header>\r\n        <Typography variant=\"h5\">\r\n          Register\r\n        </Typography>\r\n      </header>\r\n      <TextField\r\n        id=\"username\"\r\n        label=\"Username\"\r\n        variant=\"outlined\"\r\n        className={classes.field}\r\n        required\r\n        value={Username}\r\n        onChange={({ target }) => setUsername(target.value)} />\r\n      <TextField\r\n        id=\"password\"\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        variant=\"outlined\"\r\n        className={classes.field}\r\n        required\r\n        value={password}\r\n        onChange={({ target }) => setPassword(target.value)} />\r\n      <FormControlLabel\r\n        control={\r\n          <Switch\r\n            id=\"admin\"\r\n            size=\"medium\"\r\n            checked={isAdmin}\r\n            onChange={({ target }) => setAdmin(target.checked)}\r\n            color=\"primary\" />\r\n        }\r\n        label=\"is Admin?\" />\r\n      {isSubmitting ? <CircularProgress /> : <Button\r\n        variant=\"contained\"\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        color=\"primary\">\r\n        Sign up\r\n      </Button>}\r\n      <footer>\r\n        <Typography variant=\"subtitle2\">\r\n          Already have account with us? <Link to=\"/app\">Sign in</Link>\r\n        </Typography>\r\n      </footer>\r\n    </form>\r\n  );\r\n};\r\n\r\nRegistrationForm.propTypes = {\r\n  isSubmitting: PropTypes.bool,\r\n  onSubmit: PropTypes.func.isRequired\r\n};\r\n\r\nexport default RegistrationForm;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { Paper, makeStyles } from '@material-ui/core';\r\n\r\nimport { Body } from \"../common\";\r\nimport RegistrationForm from './registration-form';\r\nimport { signUp } from '../../actions';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  signUpCtr: {\r\n    margin: \"10em auto\",\r\n    maxWidth: \"32em\"\r\n  }\r\n}));\r\n\r\nconst Registration = ({ signingUp, signUpFailure }) => {\r\n  const classes = useStyles();\r\n  const showError = !signingUp && signUpFailure;\r\n  const handleRegistration = ({ username, password, admin }) => {\r\n    signUp(username.value, password.value, admin.checked);\r\n  };\r\n\r\n  return (\r\n    <Body>\r\n      <section className={classes.signUpCtr}>\r\n        {showError && <Alert severity=\"error\">{signUpFailure}</Alert>}\r\n        <br />\r\n        <Paper elevation={2}>\r\n          <RegistrationForm\r\n            isSubmitting={signingUp}\r\n            onSubmit={handleRegistration} />\r\n        </Paper>\r\n      </section>\r\n    </Body>\r\n  );\r\n};\r\n\r\nRegistration.propTypes = {\r\n  signingUp: PropTypes.bool,\r\n  signUpFailure: PropTypes.string\r\n};\r\n\r\nexport default Registration;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles, Typography, Button } from '@material-ui/core';\r\nimport { Body } from '../common';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    margin: \"10em auto\",\r\n    maxWidth: \"32em\"\r\n  }\r\n}));\r\n\r\nconst Error = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Body>\r\n      <section className={classes.container}>\r\n        <Typography variant=\"h2\" color=\"secondary\">\r\n          Sorry...\r\n        </Typography>\r\n        <br />\r\n        <Typography variant=\"h4\">\r\n          {props.message}\r\n        </Typography>\r\n        <br />\r\n        <Button href=\"/app\" size=\"large\" variant=\"outlined\" color=\"primary\">\r\n          Log in\r\n        </Button>\r\n      </section>\r\n    </Body>\r\n  );\r\n};\r\n\r\nError.propTypes = {\r\n  message: PropTypes.string\r\n};\r\n\r\nexport default Error;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport myFetch from \"../utils/request\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst withAuth = (SecureComponent) => (props) => {\r\n  const [isLoading, setLoading] = useState(true);\r\n  const [redirect, setRedirect] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function checkAuth() {\r\n      try {\r\n        const res = await myFetch(\"/session/checkToken\");\r\n        if (res.status === 200) {\r\n          setLoading(false);\r\n        } else {\r\n          throw res;\r\n        }\r\n      } catch (err) {\r\n        setLoading(false);\r\n        setRedirect(true);\r\n      }\r\n    }\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return <p>Loading....</p>\r\n  } else if (redirect) {\r\n    return <Redirect to=\"/app/error\" />\r\n  }\r\n\r\n  return (<SecureComponent {...props} />);\r\n};\r\n\r\nexport default withAuth;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { store, StoreContext } from \"../App\";\r\n\r\nconst withStore = (stateMapper = () => ({})) => (ContainerComponent) => {\r\n  return (props) => {\r\n    const state = useContext(StoreContext);\r\n    useEffect(() => {\r\n      console.log(\"REMOUNTING....\")\r\n    }, [])\r\n    const pageState = stateMapper && stateMapper(state);\r\n\r\n    return (\r\n      <ContainerComponent {...pageState} {...props} dispatch={store.dispatch} />\r\n    );\r\n  };\r\n};\r\n\r\nexport default withStore;","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { Login } from \"../components\";\r\nimport { withStore } from \"../hocs\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LoginContainer = (props) => {\r\n  const history = useHistory();\r\n  const { loggingIn, loginSuccess } = props;\r\n  useEffect(() => {\r\n    console.log(\"REMOUNTING LOGIN....\")\r\n  }, [])\r\n  useEffect(() => {\r\n    if (!loggingIn && loginSuccess) {\r\n      history.push(\"/app/home\");\r\n    }\r\n  }, [loggingIn, loginSuccess]);\r\n\r\n  return <Login {...props} />;\r\n};\r\n\r\nLoginContainer.propTypes = {\r\n  loggingIn: PropTypes.bool,\r\n  loginSuccess: PropTypes.bool,\r\n  loginFailure: PropTypes.bool,\r\n  signingUp: PropTypes.bool,\r\n  signUpSuccess: PropTypes.bool,\r\n  loggingOut: PropTypes.bool,\r\n  logoutSuccess: PropTypes.bool\r\n};\r\n\r\nconst stateMapper = (state) => ({\r\n  loggingIn: state.login.loading,\r\n  loginSuccess: state.login.payload,\r\n  loginFailure: state.login.error,\r\n  signingUp: state.signUp.loading,\r\n  signUpSuccess: state.signUp.payload,\r\n  loggingOut: state.logout.loading,\r\n  logoutSuccess: state.logout.payload,\r\n});\r\n\r\nexport default withStore(stateMapper)(LoginContainer);\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { Home } from \"../components\";\r\n\r\nimport { withStore, withAuth } from \"../hocs\";\r\nimport { getActiveUsers } from \"../actions\";\r\nimport Socket from \"../utils/socket\";\r\n\r\nconst HomeContainer = (props) => {\r\n  useEffect(() => {\r\n    if (!Socket.getSocket())\r\n      Socket.create();\r\n    getActiveUsers();\r\n  }, []);\r\n\r\n  return <Home {...props} />;\r\n};\r\n\r\nHomeContainer.propTypes = {\r\n  activeUsers: PropTypes.object,\r\n  loggedInUser: PropTypes.object\r\n};\r\n\r\nconst stateMapper = (state) => ({\r\n  activeUsers: state.activeUsers.payload,\r\n  loggedInUser: state.login.payload && state.login.payload.user\r\n});\r\n\r\nconst HomeWithAuth = withAuth(HomeContainer);\r\nexport default withStore(stateMapper)(HomeWithAuth);","import * as ACTIONS from \"../utils/actions\";\r\nimport { store } from \"../App\";\r\nimport Socket from \"../utils/socket\";\r\n\r\nexport const getActiveUsers = () => {\r\n  const socket = Socket.getSocket();\r\n  if (socket) {\r\n    store.dispatch({ type: ACTIONS.FETCH_ACTIVE_USERS_PENDING });\r\n\r\n    socket.on(\"activeUsers\", (activeUsers) => {\r\n      store.dispatch({ type: ACTIONS.FETCH_ACTIVE_USERS_SUCCESS, payload: activeUsers });\r\n    });\r\n  } else {\r\n    store.dispatch({ type: ACTIONS.FETCH_ACTIVE_USERS_FAILURE, payload: {}, error: \"Something went wrong!\" });\r\n  }\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Registration } from \"../components\";\r\nimport { withStore } from \"../hocs\";\r\nimport { SIGN_UP_RESET } from \"../utils/actions\";\r\n\r\nconst RegistrationContainer = (props) => {\r\n  const history = useHistory();\r\n  const { signingUp, signUpSuccess, dispatch } = props;\r\n\r\n  useEffect(() => {\r\n    if (!signingUp && signUpSuccess) {\r\n      history.push(\"/app\");\r\n      setTimeout(() => dispatch({ type: SIGN_UP_RESET }), 3000);\r\n    }\r\n  }, [signingUp, signUpSuccess]);\r\n\r\n  return <Registration {...props} />\r\n};\r\n\r\nRegistrationContainer.propTypes = {\r\n  signingUp: PropTypes.bool.isRequired,\r\n  signUpSuccess: PropTypes.bool,\r\n  signUpFailure: PropTypes.bool,\r\n  dispatch: PropTypes.func.isRequired\r\n};\r\n\r\nconst stateMapper = (state) => ({\r\n  signingUp: state.signUp.loading,\r\n  signUpSuccess: state.signUp.payload,\r\n  signUpFailure: state.signUp.error,\r\n});\r\n\r\nexport default withStore(stateMapper)(RegistrationContainer);","import React from \"react\";\r\n// import PropTypes from \"prop-types\";\r\n\r\nimport { Error } from \"../components\";\r\n// import { withStore } from \"../hocs\";\r\n\r\nconst ErrorContainer = (props) => {\r\n  let msg = \"Invalid session. Please login again!\";\r\n  return <Error message={msg} {...props} />;\r\n};\r\n\r\nexport default ErrorContainer;","import * as ACTIONS from \"../utils/actions\";\r\nconst initalState = { loading: false, payload: null, error: false };\r\n\r\nexport const login = (state = initalState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.LOGIN_PENDING:\r\n      return { ...state, loading: true, error: false };\r\n    case ACTIONS.LOGIN_SUCCESS:\r\n      return { ...state, loading: false, payload: action.payload, error: false };\r\n    case ACTIONS.LOGIN_FAILURE:\r\n      return { ...state, loading: false, error: true };\r\n    case ACTIONS.SIGN_UP_PENDING:\r\n    case ACTIONS.LOGIN_RESET:\r\n      return { ...initalState };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const signUp = (state = initalState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.SIGN_UP_PENDING:\r\n      return { ...state, loading: true, error: false };\r\n    case ACTIONS.SIGN_UP_SUCCESS:\r\n      return { ...state, loading: false, payload: action.payload, error: false };\r\n    case ACTIONS.SIGN_UP_FAILURE:\r\n      return { ...state, loading: false, error: action.payload };\r\n    case ACTIONS.LOGIN_PENDING:\r\n    case ACTIONS.SIGN_UP_RESET:\r\n      return { ...initalState };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const logout = (state = initalState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.LOGOUT_PENDING:\r\n      return { ...state, loading: true, error: false };\r\n    case ACTIONS.LOGOUT_SUCCESS:\r\n      return { ...state, loading: false, payload: true, error: false };\r\n    case ACTIONS.LOGOUT_FAILURE:\r\n      return { ...state, loading: false, error: true };\r\n    case ACTIONS.LOGIN_PENDING:\r\n      return { ...initalState };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import * as ACTIONS from \"../utils/actions\";\r\nconst initalState = { loading: false, payload: null, error: false };\r\n\r\nexport const activeUsers = (state = initalState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.FETCH_ACTIVE_USERS_PENDING:\r\n      return { ...state, loading: true, error: false };\r\n    case ACTIONS.FETCH_ACTIVE_USERS_SUCCESS:\r\n      return { ...state, loading: false, payload: action.payload }\r\n    case ACTIONS.FETCH_ACTIVE_USERS_FAILURE:\r\n      return { ...state, loading: false, error: true }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const userHistory = (state = initalState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.FETCH_USER_HISTORY_PENDING:\r\n      return { ...state, loading: true, error: false };\r\n    case ACTIONS.FETCH_USER_HISTORY_SUCCESS:\r\n      return { ...state, loading: false, payload: action.payload }\r\n    case ACTIONS.FETCH_USER_HISTORY_FAILURE:\r\n      return { ...state, loading: false, error: true }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport { Login, Home, Registration, Error } from \"./containers\";\nimport { createStore } from \"./utils/store\";\nimport rootReducer from \"./store\";\n\nconst store = createStore(rootReducer);\nconst StoreContext = React.createContext();\n\nconst App = () => (\n  <StoreContext.Provider value={store.getState()}>\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact render={() => <Redirect to=\"/app\" />} />\n        <Route path=\"/app\" exact component={Login} />\n        <Route path=\"/app/register\" component={Registration} />\n        <Route path=\"/app/home\" component={Home} />\n        <Route path=\"/app/error\" component={Error} />\n      </Switch>\n    </Router>\n  </StoreContext.Provider >\n);\n\nexport { store, StoreContext };\nexport default App;\n","import { combineReducers } from \"../utils/store\";\r\nimport { login, signUp, logout } from \"./auth\";\r\nimport { activeUsers, userHistory } from \"./users\";\r\n\r\nconst rootReducer = combineReducers({\r\n  login, signUp, logout,\r\n  activeUsers,\r\n  userHistory\r\n});\r\n\r\nexport default rootReducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App, { store } from './App';\n\nexport const render = () => ReactDOM.render(<App />, document.getElementById('root'));\nstore.subscribe(render);\nrender();\n"],"sourceRoot":""}